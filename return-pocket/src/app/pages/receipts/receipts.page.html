<ion-content class="ion-padding">
  <!-- Safe area spacing for device notches -->
  <div class="safe-area-top"></div>
  
  <!-- Back button -->
  <div class="back-button-container">
    <ion-button fill="clear" class="back-button" (click)="goBack()">
      <ion-icon slot="icon-only" name="arrow-back-outline"></ion-icon>
    </ion-button>
  </div>
  
  <!-- Added top margin to create space after the back button -->
  <div class="filter-container">
    <div class="sort-buttons">
      <div class="button-group-label">Sort by:</div>
      <div class="button-group">
        <ion-button [class.active]="sortBy === 'dateDesc'" (click)="setSortBy('dateDesc')" size="small">
          <ion-icon name="calendar-outline"></ion-icon>
          Newest
        </ion-button>
        <ion-button [class.active]="sortBy === 'dateAsc'" (click)="setSortBy('dateAsc')" size="small">
          <ion-icon name="calendar-outline"></ion-icon>
          Oldest
        </ion-button>
        <ion-button [class.active]="sortBy === 'amountDesc'" (click)="setSortBy('amountDesc')" size="small">
          <ion-icon name="trending-up-outline"></ion-icon>
          Highest
        </ion-button>
        <ion-button [class.active]="sortBy === 'amountAsc'" (click)="setSortBy('amountAsc')" size="small">
          <ion-icon name="trending-down-outline"></ion-icon>
          Lowest
        </ion-button>
      </div>
    </div>

    <div class="store-filters">
      <div class="button-group-label">Stores:</div>
      <div class="store-buttons">
        <ion-button [class.active]="filterStore === ''" (click)="setFilterStore('')" size="small">
          All
        </ion-button>
        <ion-button *ngFor="let store of uniqueStores" 
                    [class.active]="filterStore === store" 
                    (click)="setFilterStore(store)"
                    size="small">
          {{ store }}
        </ion-button>
      </div>
    </div>
  </div>

  <div class="receipt-list">
    <app-receipt-card *ngFor="let receipt of filteredReceipts"
                      [receipt]="receipt"
                      (click)="viewReceipt(receipt.id?.toString())">
    </app-receipt-card>
  </div>
</ion-content>
